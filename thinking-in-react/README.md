# thinking in React

## モックを作る

## UI をコンポーネントの階層構造に落とし込む
モックを形作っている各コンポーネントを四角で囲んで、それぞれに名前をつけていく。  
どうやって単一のコンポーネントに括る範囲を決めるか？

### 単一責任の原則（single responsibility principle)
ひとつのコンポーネントは理想的にはひとつのことだけをするべき

## 静的なバージョンを作成する
最初は、データモデルを受け取って UI の描画だけを行い、ユーザからの操作はできないというバージョンを作るのが簡単。
**表示の実装とユーザ操作の実装を切り離しておくことは重要**である。

- 静的なバージョンづくり : タイプ量が多いかわりに考えることが少ない
- ユーザ操作を実装するとき : タイプ量が少ないかわりに考えることが多い

props は親から子へデータを渡すための手段。  
静的なバージョンを作る上では**一切 state を使わない**こと。  
state はユーザ操作や時間経過などで動的に変化するデータを扱うために確保されている機能。  

コンポーネントはトップダウンで作ってもボトムアップで作ってもよいが、シンプルなアプリはトップダウンで作ったほうが簡単、大きなプロジェクトでは開発をしながらテストを書き、ボトムアップでやったほうが簡単。

元となるデータモデルを更新して再度 `ReactDOM.render()` を呼び出すと UI が更新される。静的なバージョンで作ると、複雑なことをしていないので、
UI がどのように更新されて、どこを変更すればよいか理解しやすい。
React の**単方向データフロー（単方向バインディング）**により、すべてがモジュール化された高速な状態で保たれる。

## state の使い方
UI をインタラクティブなものにするには元となっているデータモデルを更新できる必要があり、これは state を使うことで実現できる。

- 親から props を通じて与えられたデータか？　もしそうであればそれは state ではない。
- 時間経過で変化しないままでいるデータか？　もしそうであればそれは state ではない。
- コンポーネント内にある他の props や state を使って算出可能なデータか？　もしそうであれば、それは state ではない。

本アプリでいえば、state は次の 2 つ。
- ユーザが入力した検索文字列
- チェックボックスの値

## state をどこに配置すべきか（どのコンポーネントが state を変化させるのか）？
- その state を使って表示を行う、すべてのコンポーネントを確認する
- 共通の親コンポーネントを見つける（その階層構造の中で、ある state を必要としているすべてのコンポーネントの上位にある単一のコンポーネント）
- 共通の親コンポーネントか、その階層構造でさらに上位の別のコンポーネントが state を持っているべき
- もし state を持つにふさわしいコンポーネントを見つけられなかった場合は、 state を保持するためだけの新しいコンポーネントを作り、階層構造の中ですでに見つけておいた子湯通の親コンポーネントの上に配置する。